/* Meiya 2016-05-26 10:47 */!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";var d={elem:".J_Loading",onshow:function(){},onhide:function(){}},e='<div class="J_Loading loading"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div>',f=function(a){var b=null;a=$.extend(d,a||{}),$.extend(this,a),b=$(a.elem),0===b.length&&(b=$(e),document.body.appendChild(b[0])),this.$elem=b},g=f.prototype={constructor:f};$.extend(g,{show:function(){return this.$elem.show(),this.__dispatchEvent("show"),this},hide:function(){return this.$elem.hide(),this.__dispatchEvent("hide"),this},__dispatchEvent:function(a,b){this["on"+a]&&this["on"+a](b)},destory:function(){this.$elem.remove();for(var a in this)delete this[a];return this}}),b.exports=f},{}],2:[function(a,b,c){"use strict";function d(a,b){var c=b||window.location.search.substr(1),d=new RegExp("(^|&)"+a+"=([^&]*)(&|$)","i"),e=c.match(d);return null!=e?decodeURI(e[2]):null}function e(a){var b=a.substring(a.indexOf("s/")+2),c=m._type.toLowerCase()+"-click";MY.xhr.api({type:"post",url:"/v1/stats",data:{event:"search",value:m._search,type:c,object_id:b}}),MY.xhr.api({type:"post",url:"/v1/stats",data:{event:"search",value:m._search,type:"click",object_id:b}}),i.callHandler("navi_page_action",a)}var f=a("./tpl/show"),g=a("../../public/src/ui/zepto.loading"),h=new g,i=MY.appBridge,j=$("body"),k=$("#J_Articles"),l=!1,m={_page:1,_type:d("type"),_search:d("search"),_title:"相关内容",init:function(){var a=this;i.callHandler("get_query_string",function(b){var c=b.query_string;a._type=d("type",c),a._search=d("search",c),a._title="Tutorial"==a._type?"相关视频":"Post"==a._type?"相关帖子":"相关妆品",i.callHandler("set_webview_title",{title:m._title}),a.load(),a.event()})},load:function(){MY.xhr.get("/api/search",{q:m._search,page:m._page,per_page:30,type:m._type}).done(function(a){h.hide(),a.data.length?(k.hasClass("show")||k.addClass("show"),l=!1,a.text=m._type.toLowerCase()+"s",k.append(f("articles",a))):i.callHandler("my_toast",{delay:1,content:"没有更多内容啦~"})})},event:function(){k.delegate("a","tap",function(a){a.preventDefault();var b=$(this),c=b.attr("data-url");e(c)})}};m.init(),$(window).scroll(function(a){var b=j.scrollTop(),c=j.find(".main").height(),d=$(window).height();100>c-b-d&&(l||($(".loading").css("position","fixed"),h.show(),l=!0,m._page+=1,m.load()))})},{"../../public/src/ui/zepto.loading":1,"./tpl/show":3}],3:[function(a,b,c){"use strict";!function(){function a(a,b){return(/string|function/.test(typeof b)?j:i)(a,b)}function d(a,b){return"string"!=typeof a&&(b=typeof a,"number"===b?a+="":a="function"===b?d(a.call(a)):""),a}function e(a){return n[a]}function f(a){return d(a).replace(/&(?![\w#]+;)|[<>"']/g,e)}function g(a,b){if(o(a))for(var c=0,d=a.length;d>c;c++)b.call(a,a[c],c,a);else for(c in a)b.call(a,a[c],c)}function h(a,b){var c=/(\/)[^\/]+\1\.\.\1/,d=("./"+a).replace(/[^\/]+$/,""),e=d+b;for(e=e.replace(/\/\.\//g,"/");e.match(c);)e=e.replace(c,"/");return e}function i(b,c){var d=a.get(b)||k({filename:b,name:"Render Error",message:"Template not found"});return c?d(c):d}function j(a,b){if("string"==typeof b){var c=b;b=function(){return new m(c)}}var d=l[a]=function(c){try{return new b(c,a)+""}catch(d){return k(d)()}};return d.prototype=b.prototype=p,d.toString=function(){return b+""},d}function k(a){var b="{Template Error}",c=a.stack||"";if(c)c=c.split("\n").slice(0,2).join("\n");else for(var d in a)c+="<"+d+">\n"+a[d]+"\n\n";return function(){return"object"==typeof console&&console.error(b+"\n\n"+c),b}}var l=a.cache={},m=window.String,n={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},o=Array.isArray||function(a){return"[object Array]"==={}.toString.call(a)},p=a.utils={$helpers:{},$include:function(a,b,c){return a=h(c,a),i(a,b)},$string:d,$escape:f,$each:g},q=a.helpers=p.$helpers;a.get=function(a){return l[a.replace(/^\.\//,"")]},a.helper=function(a,b){q[a]=b},"function"==typeof define?define(function(){return a}):"undefined"!=typeof c?b.exports=a:this.template=a,a("articles",function(a){var b=this,c=(b.$helpers,b.$each),d=a.data,e=(a.model,a.i,b.$escape),f=a.text,g="";return c(d,function(a){g+=' <article class="article"> <a data-url="meiya://',g+=e(f),g+="/",g+=e(a.model_id),g+='"> <div class="img-wrap"> ',a.image_thumb?(g+=' <img src="',g+=e(a.image_thumb),g+='?imageView2/1/h/240" alt=""> '):g+=' <img src="./img/index/default.png" alt=""> ',g+=' </div> <div class="article-detail"> <div class="title"> <h2>',"tutorials"==f&&(g+='<i class="icon icon-video"></i>'),g+=e(a.title),g+='</h2> </div> <div class="tools"> <span class="view"><i class="icon icon-view"></i><span>',g+=e(a.view_count),g+='</span></span> <span class="comment"><i class="icon icon-cmnt"></i><span>',g+=e(a.comment_count),g+="</span></span> </div> </div> </a> </article> "}),new m(g)}),a("tip",function(a){var b=this,c=(b.$helpers,b.$escape),d=a.data,e="";return e+='<div id="tip" class="tip"> <span>',e+=c(d),e+="</span> </div>",new m(e)})}()},{}]},{},[2]);