/* Meiya 2016-05-30 16:26 */!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";var d=MY.appBridge,e=$("#J_header"),f=$("#J_Progress"),g=$("#J_Checkbox"),h={init:function(){this.signin.post(),this.checkbox.init()},signin:{getSigninInfo4Client:function(a){return MY.xhr.api({url:"/v1/user-attendances",type:"get",data:{user_id:a},success:function(a){a.metadata&&d.callHandler("check_user_attendances",{is_sign_in:a.metadata.is_sign_in})}})},post:function(){var a=this;d.callHandler("get_reminder_local_notification",function(b){var c=b.user_id||b["user-id"];if(0!=c&&void 0!=c)b.alert&&g.prop("checked",!0),d.callHandler("get_version",function(b){var d={user_id:c,version:b.version};MY.isiPhone?d.os="ios":MY.isAndroid?d.os="android":d.os="未知",MY.xhr.api({url:"/v1/user-attendances",type:"POST",data:d,success:function(b){h.signin.render(b),a.getSigninInfo4Client(c)}})});else{d.callHandler("request_login");var e=setInterval(function(){MY.appBridge.callHandler("get_user_id",function(a){"0"!=a.user_id&&(h.signin.post(),clearInterval(e))})},500)}})},render:function(a){var b=a.metadata,c=b.is_today_first_sign_in,d=b.continuous_attended_days_count,g=b.point,h=b.total_point,i=d%5||5;e.find(".big").text("+"+g),e.find(".small").text(c?"签到成功":"已签到"),e.find(".text").text("连续签到"+i+"天"),e.find(".total").text(h),$("#J_Day").text(d),f.css({width:20*i+"%"}),e.addClass("active")}},checkbox:{alias:"daily_reminder_local_notification",init:function(){g.bind("change",function(){var a=$(this).prop("checked");h.checkbox.touch(a)})},touch:function(a){var b=this;d.callHandler(b.alias,{alert:a,time:32400,text:"快去签到吧~"})}}};h.init()},{}]},{},[1]);