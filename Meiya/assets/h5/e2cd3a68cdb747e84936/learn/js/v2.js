/* Meiya 2016-05-26 10:47 */!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){!function(){function a(a,b){return(/string|function/.test(typeof b)?j:i)(a,b)}function d(a,b){return"string"!=typeof a&&(b=typeof a,"number"===b?a+="":a="function"===b?d(a.call(a)):""),a}function e(a){return n[a]}function f(a){return d(a).replace(/&(?![\w#]+;)|[<>"']/g,e)}function g(a,b){if(o(a))for(var c=0,d=a.length;d>c;c++)b.call(a,a[c],c,a);else for(c in a)b.call(a,a[c],c)}function h(a,b){var c=/(\/)[^\/]+\1\.\.\1/,d=("./"+a).replace(/[^\/]+$/,""),e=d+b;for(e=e.replace(/\/\.\//g,"/");e.match(c);)e=e.replace(c,"/");return e}function i(b,c){var d=a.get(b)||k({filename:b,name:"Render Error",message:"Template not found"});return c?d(c):d}function j(a,b){if("string"==typeof b){var c=b;b=function(){return new m(c)}}var d=l[a]=function(c){try{return new b(c,a)+""}catch(d){return k(d)()}};return d.prototype=b.prototype=p,d.toString=function(){return b+""},d}function k(a){var b="{Template Error}",c=a.stack||"";if(c)c=c.split("\n").slice(0,2).join("\n");else for(var d in a)c+="<"+d+">\n"+a[d]+"\n\n";return function(){return"object"==typeof console&&console.error(b+"\n\n"+c),b}}var l=a.cache={},m=this.String,n={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},o=Array.isArray||function(a){return"[object Array]"==={}.toString.call(a)},p=a.utils={$helpers:{},$include:function(a,b,c){return a=h(c,a),i(a,b)},$string:d,$escape:f,$each:g},q=a.helpers=p.$helpers;a.get=function(a){return l[a.replace(/^\.\//,"")]},a.helper=function(a,b){q[a]=b},"function"==typeof define?define(function(){return a}):"undefined"!=typeof c?b.exports=a:this.template=a,a("main",function(a){"use strict";var b=this,c=(b.$helpers,b.$escape),d=a.title,e=b.$each,f=a.data,g=(a.item,a.i,"");return g+='<h3 class="title">',g+=c(d),g+='</h3> <div class="inner"> ',e(f,function(a,b){3>b?(g+='<div class="item"> <img class="pic" src="',g+=c(a.avatar_url),g+='" data-type="navi_page_action" data-link="meiya://tutorial_category/',g+=c(a.id),g+="?title=",g+=c(a.name),g+='"> <strong>',g+=c(a.name),g+="</strong> </div>"):(g+='<div class="item no-pic"> <strong data-type="navi_page_action" data-link="meiya://tutorial_category/',g+=c(a.id),g+="?title=",g+=c(a.name),g+='">',g+=c(a.name),g+="</strong> </div>")}),g+=" </div>",new m(g)})}()},{}],2:[function(a,b,c){function d(a){var a=a.replace(/(\w)/,function(a){return a.toUpperCase()});return a}var e=a("./tpl/v2"),f=MY.xhr,g=MY.appBridge,h={};h.hot={uri:"/api/hot-tutorials",param:{page:1,per_page:4},getData:function(){var a=this;return f.ajax({url:this.uri,type:"get",dataType:"json",success:function(b){a.res=b,a.local()}})},render:function(a){if(a=a||this.res.data,a.length){var b="<ul>";a.forEach(function(a){b+='<li data-type="navi_page_action" data-link="meiya://tutorial_category/'+a.id+"?title="+a.name+'&type=hot">'+a.name+"</li>"}),b+="</ul>",$("#J_Hot").html(b)}},local:function(){var a=this.res.data;localStorage.setItem(this.localAlias,JSON.stringify(a))},localAlias:"learn_hot-tutorials",init:function(){var a=this,b=localStorage.getItem(a.localAlias);if(b&&void 0!==b){var c=JSON.parse(b);this.res={data:c},this.render(c),setTimeout(function(){this.getData().done(function(){a.render()})}.bind(this),0)}else this.getData().done(function(b){a.render(b.data)})}},h.list={data:{},typeHash:["sort","style","base"],paramHash:{style:{without_tutorials:2,parent_id:2},base:{without_tutorials:2,parent_id:24},sort:{without_tutorials:2,parent_id:1}},getData:function(a){var b=this;return f.ajax({url:"/api/tutorial-categories",type:"get",dataType:"json",data:this.paramHash[a],success:function(c){b.data[a]=c.data,b.local(a)}})},local:function(a){var b=this.data[a];localStorage.setItem("study_"+a,JSON.stringify(b))},render:function(a){var b={sort:"小白",base:"护肤",style:"风格"},c=this.data[a],f=e("main",{data:c,title:b[a]}),a=d(a);$("#J_"+a).html(f)},init:function(){var a=this;this.typeHash.forEach(function(b){var c=localStorage.getItem("study_"+b);c&&"undefined"!==c?(this.data[b]=JSON.parse(c),this.render(b),setTimeout(function(){this.getData(b).done(function(){a.render(b)})}.bind(this),3e3)):this.getData(b).done(function(){a.render(b)})}.bind(this))}},h.naviPageAction=function(a){var b=a.target,c=b.dataset,d=c.type,e=c.link;"navi_page_action"==d&&g.callHandler("navi_page_action",e)},h.init=function(){this.hot.init(),this.list.init(),$(document).on("tap",this.naviPageAction)},h.init()},{"./tpl/v2":1}]},{},[2]);